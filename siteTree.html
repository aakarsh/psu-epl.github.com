---
title: Site Tree
layout: doc
author: Joe Shields
date: 2019-11-14
---

<p>
Can't find what you're looking for? Here's a tree of all the pages on this site. <br/>
If you still can't find what you need, try <a href="https://github.com/psu-epl/psu-epl.github.com/search">searching the repo</a> or just ask a manager.
</p>

<pre id="preTree"></pre>

<script type="text/javascript" src="functions.js"></script>

<script>
console.log('hello world')
var siteUrl = "{{site.url}}";
var testVar = {
	text: "example",
	num: 1
};

// read the site structure into a JSON object
var pages = [ 
{%for pagei in site.pages%}  { 
        title: "{{pagei.title}}" ,
        url: "{{pagei.url}}", 
        dir: "{{pagei.dir}}", 
        path: "{{pagei.path}}", 
        name: "{{pagei.name}}", 
        layout: "{{pagei.layout}}", 
        author: "{{pagei.author}}", 
        date: "{{pagei.date}}", 
        pageRole: "",
        parent: "",
        children: [],
        siblings: []
    }{% unless forloop.last %},{% endunless %}
{%endfor%}
];
console.log('here is the page list is it comes from Liquid:');
console.log(pages);

const treeIgnores = ['/sitemap.xml', '/sitePages.json', '/robots.txt', '/example.html'];
censoredPages = censorPages(pages, treeIgnores, 'url')
pages = censoredPages; // avoids scope fuckery with censorPages()
var rootIndex = linkChildren(pages);
siteTree = getRelations(rootIndex, pages);
ulTree = '<ul>'+listFromTree(siteTree, 'ul')+'</ul>';
preTree = preFromTree(siteTree, '');
document.getElementById("preTree").innerHTML = preTree

// get some JSON using the helpers in functions.js
// sitePages_fxn = function(sitePages, otherArgs){
//         console.log('here is the JSON response: ')
//         console.log(sitePages);
//         document.getElementById("foo").innerHTML = JSON.stringify(sitePages);
// }
// useJson('sitePages.json', null, sitePages_fxn);

// get some JSON using vanilla JS
// var request = new XMLHttpRequest();
// request.open('GET', 'sitePages.json', true);
// request.onload = function() {
//     // Sadly, it's a bit of a thing to just wait for something to finish in JS.
//     // So, everything that requires the JSON needs to be inside this function.
//     var jsonData = JSON.parse(this.response);
//     console.log('here is the JSON response: ')
//     console.log(jsonData);
//     document.getElementById("foo").innerHTML = JSON.stringify(jsonData);
// }
// request.send();
</script>
